<div *ngIf="subtopicDetails && subtopics" class="container">
  <app-breadcrumb #breadcrumb></app-breadcrumb>
  <div class="user-action mobile-hidden pull-right">
    <app-user-action-sidebar
      [mobile]="true"
      [id]="activeSubtopicParam"
      [type]="type"
    ></app-user-action-sidebar>
  </div>
  <div class="row">
    <div class="col-md-10 col-sm-12">
      <h1 *ngIf="subtopics.id == activeSubtopicParam" class="subtopic-heading">
        {{ subtopics.name }}
      </h1>
    </div>
  </div>
  <div class="row" *ngIf="isInternalResource">
    <div class="col-sm-12" >
        <app-search-filter
          (notifyFilterCriteria)="enableFilter($event)"
          [resourceResults]="resourceResults"
          [initialResourceFilter]="initialResourceFilter"
          [searchResults]="searchResults"
          [isSortingDisabled] = "true"
        ></app-search-filter>
      </div>
  </div>
  <div class="row">
    <div class="col-md-8 col-sm-12">
      <div
        class="box-no-shadow" 
        *ngIf="subtopics.overview">
        <div *ngIf="subtopics.overview" class="subtopic-body">
          <div >
            <h2>Overview</h2>
            <p>{{ subtopics.overview }}</p>
          </div>
      </div>
    </div>
      <div *ngIf="actionPlanData.length > 0" class="row">
        <a [routerLink]="['/resource', '123']"> 
          <h3>Action Plans</h3>
        </a>
        <p>
          Our action plans are based on common resolution steps for people
          dealing with eviction. Please ask a professional if you have
          questions.
        </p>
        <div *ngFor="let resource of actionPlanData; let indexer = index">
          <app-resource-card
            *ngIf="indexer < displayResources"
            [resource]="resource"
            [showRemoveOption]="showRemoveOption">
          </app-resource-card>
        </div>
        <button
          class="btn btn-primary no-print"
          (click)="clickSeeMoreOrganizationsFromSubtopicDetails(actionPlanData[0].resourceType)">
          See more Action Plans
        </button>
      </div>
      <div *ngIf="articleData.length > 0" class="row">
        <h3>Articles</h3>
        <div *ngFor="let resource of articleData; let indexer = index">
          <app-resource-card
            *ngIf="indexer < displayResources"
            [resource]="resource"
            [showRemoveOption]="showRemoveOption">
          </app-resource-card>
        </div>
        <button
          *ngIf="articleData.length > 5"
          class="btn btn-primary no-print"
          (click)="clickSeeMoreOrganizationsFromSubtopicDetails(articleData[0].resourceType)">
          See more Articles
        </button>
      </div>
      <div class="row" *ngIf="relatedLinksData.length > 0">
        <h3>Additional Readings</h3>
        <div *ngFor="let resource of relatedLinksData; let indexer = index">
        <app-resource-card
          *ngIf = "indexer < displayResources"
          [resource]="resource"
          [showRemoveOption]="false"
          [sharedResources]="false"
        >
        </app-resource-card>
      </div>
      <button
          *ngIf="relatedLinksData.length > 5"
          class="btn btn-primary no-print"
          (click)="clickSeeMoreOrganizationsFromSubtopicDetails(relatedLinksData[0].resourceType)">
          See more Additional Readings
        </button>
      </div>
      <div *ngIf="videoData.length > 0" class="row">
        <h3>Videos</h3>
        <div *ngFor="let resource of videoData; let indexer = index">
          <app-resource-card
            *ngIf="indexer < displayResources"
            [resource]="resource"
            [showRemoveOption]="showRemoveOption">
          </app-resource-card>
        </div>
        <button
          *ngIf="videoData.length > 5"
          class="btn btn-primary no-print"
          (click)="clickSeeMoreOrganizationsFromSubtopicDetails(videoData[0].resourceType)">
          See more Videos
        </button>
      </div>
      <div *ngIf="formData.length > 0" class="row">
        <h3>Forms</h3>
        <div *ngFor="let resource of formData; let indexer = index">
          <app-resource-card
            *ngIf="indexer < displayResources"
            [resource]="resource"
            [showRemoveOption]="showRemoveOption">
          </app-resource-card>
        </div>
        <button
          *ngIf="formData.length > 5" 
          class="btn btn-primary no-print"
          (click)="clickSeeMoreOrganizationsFromSubtopicDetails(formData[0].resourceType)">
          See more Forms
        </button>
      </div>
      <div *ngIf="organizationData.length > 0" class="row">
        <h3>Organizations That May Be Able To Help</h3>
        <div *ngFor="let resource of organizationData; let indexer = index">
          <app-resource-card
            *ngIf="indexer < displayResources"
            [resource]="resource"
            [showRemoveOption]="showRemoveOption">
          </app-resource-card>
        </div>
        <button
          *ngIf="organizationData.length > 5"
          class="btn btn-primary no-print"
          (click)="clickSeeMoreOrganizationsFromSubtopicDetails(organizationData[0].resourceType)">
          See more Organizations
        </button>
      </div>
    </div>
    <div class="col-md-4 col-sm-12 sidebars">
      <app-guided-assistant-sidebar
        [activeSubTopic]="guidedSutopicDetailsInput">
      </app-guided-assistant-sidebar>
      <div class="mapWrap">
        <app-map-results [searchResource]="organizationData" [addressArr]="true"></app-map-results>
      </div>
      <app-service-org-sidebar
        (showMoreOrganizations)="clickSeeMoreOrganizationsFromSubtopicDetails($event)">
      </app-service-org-sidebar>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 user-action web-hidden">
      <app-user-action-sidebar
        [mobile]="true"
        [id]="activeSubtopicParam"
        [type]="type"
      ></app-user-action-sidebar>
    </div>
  </div>
</div>
