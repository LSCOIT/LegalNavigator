<div class="container" *ngIf="guidedAssistantResults">
  <div *ngIf="guidedAssistantResults.topIntent; else elseblock">
    <div
      *ngIf="
        guidedAssistantResults.guidedAssistants &&
          guidedAssistantResults.curatedExperiences.length == 1;
        else multiga
      "
      class="col-sm-8 col-sm-offset-2 text-center top-intent"
    >
      <h3>It looks like you are looking for information on:</h3>
      <p class="text-capitalize">{{ guidedAssistantResults.topIntent }}</p>
      <button
        class="btn btn-primary"
        routerLink="/guidedassistant/{{
          guidedAssistantResults?.guidedAssistants[0].Item1
        }}"
      >
        Start the Guided Assistant
      </button>
      <div>
        <a class="link col-md-12 text-center" (click)="backToSearch()">Back</a>
      </div>
    </div>
    <ng-template #multiga>
      <div
        *ngIf="
          guidedAssistantResults.guidedAssistants &&
            guidedAssistantResults.curatedExperiences.length > 1;
          else elseIfBlock
        "
        class="col-sm-8 col-sm-offset-2 text-center top-intent"
      >
        <h3>It looks like you are looking for information on:</h3>
        <p class="text-capitalize">{{ guidedAssistantResults.topIntent }}</p>
        <p>Here is a list of guided interviews we've found</p>
        <div
          *ngFor="let ce of guidedAssistantResults.curatedExperiences"
          class="text-left"
        >
          <a
            class="link col-md-12"
            target="_blank"
            routerLink="/guidedassistant/{{ ce.CuratedExperienceId }}"
            *ngIf="!ce.IsExternal"
            >{{ ce.Title }}</a
          >
          <a
            class="link col-md-12"
            target="_blank"
            href="{{ ce.Url }}"
            *ngIf="ce.IsExternal"
            >{{ ce.Title }}</a
          >
        </div>
        <div>
          <a class="link col-md-12 text-center" (click)="backToSearch()"
            >Back</a
          >
        </div>
      </div>
    </ng-template>
    <ng-template #elseIfBlock>
      <div
        class="col-sm-8 col-sm-offset-2 text-center top-intent"
        *ngIf="
          !guidedAssistantResults.guidedAssistantId &&
            guidedAssistantResults.topicIds.length > 0;
          else elseblock
        "
      >
        <h3>It looks like you are looking for information on:</h3>
        <p class="text-capitalize">{{ guidedAssistantResults.topIntent }}</p>
        <span class="p">
          We currently do not have a curated experience for that topic. Please
          checkout the
          <a
            class="link"
            routerLink="/topics/{{ guidedAssistantResults.topicIds[0] }}"
          >
            {{ guidedAssistantResults?.topIntent }}
          </a>
          page to view other information and resources that may be helpful to
          you.
        </span>
        <div class="row">
          <a routerLink="/guidedassistant" class="link col-md-12 text-center">
            Back
          </a>
        </div>
      </div>
    </ng-template>
    <div
      class="row"
      *ngIf="guidedAssistantResults?.relevantIntents?.length > 0"
    >
      <div class="col-sm-12 relevant-intent">
        <h5>
          You may also be interested in the following topic{{
            guidedAssistantResults.relevantIntents.length > 1 ? "s" : ""
          }}:
        </h5>
        <form>
          <div class="button-container">
            <ul>
              <li *ngFor="let intent of guidedAssistantResults.relevantIntents">
                <div (change)="onSelectTopic($event, intent.Name)">
                  <input
                    type="checkbox"
                    [id]="intent.Name"
                    [value]="intent.Name"
                    name="multiSelectOptions"
                    #checkBox
                    ngModel
                  />
                  <label
                    [for]="intent.Name"
                    class="p text-capitalize"
                    tabindex="0"
                    (keyup.enter)="$event.target.click()"
                  >
                    {{ intent.Name }}
                  </label>
                  <div (click)="checkBox.click()" class="check"></div>
                </div>
                <a
                  class="link p"
                  target="_blank"
                  routerLink="/topics/{{ intent.Id }}"
                >
                  Learn More
                </a>
              </li>
            </ul>
          </div>
          <button
            type="submit"
            class="btn btn-secondary"
            (click)="saveForLater()"
          >
            Save topics for later
          </button>
        </form>
      </div>
    </div>
  </div>
  <ng-template #elseblock>
    <div class="col-sm-8 col-sm-offset-2 text-center top-intent">
      <h3>
        Sorry, we did not find anything that matches your search. Please try
        again with a different search term or try searching with the general
        <a class="link" routerLink="/search">search</a>.
      </h3>
    </div>
  </ng-template>
</div>
